.create-node-modal {
    width: 760px;
    max-width: 96vw;
    max-height: 92vh;
    display: flex;
    flex-direction: column;
    position: relative;
    background: linear-gradient(135deg, #131b2d 0%, #17223a 100%);
    border: 1px solid rgba(99, 102, 241, 0.35);
    border-radius: 14px;
    box-shadow: 0 16px 36px rgba(15, 23, 42, 0.55);
}

.create-node-modal .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.25rem;
    border-bottom: 1px solid rgba(99, 102, 241, 0.28);
    background: rgba(30, 41, 59, 0.72);
}

.create-node-modal .modal-header h3 {
    margin: 0;
    color: #e2e8f0;
    font-size: 1.1rem;
}

.create-node-modal .modal-body {
    padding: 1rem 1.25rem;
    overflow-y: auto;
    max-height: calc(92vh - 132px);
}

.create-node-modal .modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: 0.75rem;
    padding: 0.9rem 1.25rem;
    border-top: 1px solid rgba(99, 102, 241, 0.28);
    background: rgba(15, 23, 42, 0.45);
}

.create-node-modal .form-group {
    margin-bottom: 1rem;
}

.create-node-modal .form-group label {
    display: block;
    margin-bottom: 0.45rem;
    color: #cbd5e1;
    font-size: 0.86rem;
}

.create-node-modal .form-input,
.create-node-modal .form-textarea {
    width: 100%;
    padding: 0.72rem 0.9rem;
    border-radius: 8px;
    border: 1px solid rgba(99, 102, 241, 0.35);
    background: rgba(15, 23, 42, 0.62);
    color: #f8fafc;
    font-size: 0.9rem;
}

.create-node-modal .form-input:focus,
.create-node-modal .form-textarea:focus {
    outline: none;
    border-color: rgba(129, 140, 248, 0.8);
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
}

.create-node-modal .form-textarea {
    min-height: 80px;
    resize: vertical;
}

.create-node-modal .form-input.read-only {
    color: #cbd5e1;
    background: rgba(30, 41, 59, 0.8);
}

.create-node-modal .error-text {
    display: block;
    margin-top: 0.35rem;
    color: #fca5a5;
    font-size: 0.8rem;
}

.inline-field-error {
    margin-top: 0.2rem;
}

.associations-section {
    margin-top: 1.2rem;
    padding-top: 1rem;
    border-top: 1px solid rgba(99, 102, 241, 0.22);
}

.associations-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 0.9rem;
}

.associations-header h4 {
    margin: 0;
    color: #dbeafe;
    font-size: 0.95rem;
}

.sense-list-scroll {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.sense-card {
    padding: 0.9rem;
    border: 1px solid rgba(99, 102, 241, 0.32);
    border-radius: 10px;
    background: rgba(15, 23, 42, 0.52);
    display: flex;
    flex-direction: column;
    gap: 0.62rem;
}

.sense-card-header {
    display: flex;
    align-items: center;
    gap: 0.7rem;
}

.sense-card-header .node-name {
    color: #e2e8f0;
    font-size: 0.9rem;
}

.sense-relation-count {
    color: #93c5fd;
    font-size: 0.78rem;
    margin-right: auto;
}

.sense-relations-editor {
    margin-top: 0.2rem;
    display: flex;
    flex-direction: column;
    gap: 0.65rem;
}

.create-node-modal .admin-add-sense-relations {
    margin-top: 0.2rem;
    padding: 0.75rem;
    border-radius: 10px;
    border: 1px solid rgba(99, 102, 241, 0.3);
    background: rgba(2, 6, 23, 0.42);
}

.relation-type-row {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 0.6rem;
    flex-wrap: wrap;
}

.create-node-modal .create-relation-cards {
    flex: 1;
    min-width: min(100%, 320px);
}

.create-node-modal .admin-assoc-relation-cards {
    display: flex;
    flex-direction: column;
    gap: 0.55rem;
}

.create-node-modal .admin-assoc-relation-card {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 0.85rem;
    border-radius: 8px;
    border: 1px solid rgba(99, 102, 241, 0.28);
    background: rgba(15, 23, 42, 0.5);
    cursor: pointer;
    transition: all 0.2s ease;
}

.create-node-modal .admin-assoc-relation-card:hover {
    border-color: rgba(96, 165, 250, 0.65);
    background: rgba(30, 41, 59, 0.75);
}

.create-node-modal .admin-assoc-relation-card.active {
    border-color: rgba(96, 165, 250, 0.8);
    background: rgba(30, 64, 175, 0.28);
}

.create-node-modal .admin-assoc-relation-icon {
    width: 30px;
    height: 30px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
}

.create-node-modal .admin-assoc-relation-icon.extends {
    background: rgba(34, 197, 94, 0.2);
    color: #4ade80;
}

.create-node-modal .admin-assoc-relation-icon.contains {
    background: rgba(250, 204, 21, 0.2);
    color: #fcd34d;
}

.create-node-modal .admin-assoc-relation-icon.insert {
    background: rgba(99, 102, 241, 0.2);
    color: #a5b4fc;
}

.create-node-modal .admin-assoc-relation-content h6 {
    margin: 0;
    color: #e2e8f0;
    font-size: 0.85rem;
}

.create-node-modal .admin-assoc-relation-content p {
    margin: 0.2rem 0 0;
    font-size: 0.76rem;
    color: #94a3b8;
}

.relation-type-switcher {
    display: flex;
    gap: 0.5rem;
}

.relation-type-btn {
    border: 1px solid rgba(148, 163, 184, 0.4);
    border-radius: 7px;
    padding: 0.4rem 0.62rem;
    background: rgba(30, 41, 59, 0.72);
    color: #cbd5e1;
    font-size: 0.78rem;
    cursor: pointer;
}

.relation-type-btn.active {
    border-color: rgba(129, 140, 248, 0.9);
    color: #e0e7ff;
    background: rgba(79, 70, 229, 0.34);
}

.relation-help-btn {
    border: 1px solid rgba(148, 163, 184, 0.45);
    border-radius: 7px;
    padding: 0.38rem 0.62rem;
    background: rgba(15, 23, 42, 0.58);
    color: #cbd5e1;
    font-size: 0.76rem;
    cursor: pointer;
    transition: border-color 0.2s ease, background 0.2s ease, color 0.2s ease;
}

.relation-help-btn:hover {
    border-color: rgba(129, 140, 248, 0.85);
    background: rgba(79, 70, 229, 0.22);
    color: #e2e8f0;
}

.relation-hint-text {
    color: #94a3b8;
    font-size: 0.78rem;
    margin: 0;
}

.create-node-modal .admin-assoc-step-description {
    margin: 0;
    color: #94a3b8;
    font-size: 0.8rem;
}

.create-node-modal .admin-add-sense-insert-targets {
    display: flex;
    flex-wrap: wrap;
    gap: 0.45rem;
}

.create-node-modal .admin-add-sense-insert-hint {
    margin: 0;
    color: #cbd5e1;
    font-size: 0.78rem;
}

.create-node-modal .admin-add-sense-insert-hint.locked {
    color: #fcd34d;
}

.create-node-modal .admin-add-sense-selected-target {
    margin: 0;
    color: #cbd5e1;
    font-size: 0.78rem;
}

.create-node-modal .btn-action {
    padding: 0.36rem 0.72rem;
    border: none;
    border-radius: 6px;
    font-size: 0.75rem;
    cursor: pointer;
    transition: all 0.2s ease;
    font-weight: 500;
}

.create-node-modal .btn-view {
    background: #2563eb;
    color: #fff;
}

.create-node-modal .btn-view:hover {
    background: #1d4ed8;
}

.create-node-modal .btn-primary-small {
    background: #4f46e5;
    color: #fff;
}

.create-node-modal .btn-primary-small:hover {
    background: #4338ca;
}

.create-node-modal .btn-action.btn-secondary {
    background: rgba(51, 65, 85, 0.8);
    border: 1px solid rgba(148, 163, 184, 0.5);
    color: #e2e8f0;
}

.create-node-modal .btn-action.btn-secondary.locked {
    opacity: 0.75;
    cursor: not-allowed;
}

.relation-visual {
    border: 1px dashed rgba(129, 140, 248, 0.35);
    border-radius: 9px;
    padding: 0.7rem;
    background: rgba(30, 41, 59, 0.48);
}

.relation-visual-single {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.45rem;
}

.relation-visual-single.compact {
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
}

.relation-node {
    border: 1px solid rgba(148, 163, 184, 0.4);
    border-radius: 8px;
    padding: 0.42rem 0.55rem;
    font-size: 0.76rem;
    line-height: 1.35;
    width: 100%;
    text-align: center;
    background: rgba(15, 23, 42, 0.76);
}

.relation-node.current {
    border-color: rgba(56, 189, 248, 0.65);
    color: #e0f2fe;
}

.relation-node.target {
    border-color: rgba(250, 204, 21, 0.55);
    color: #fef3c7;
}

.relation-node.clickable {
    cursor: pointer;
    appearance: none;
}

.relation-node.clickable.active {
    box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.4);
}

.relation-arrow {
    color: #93c5fd;
    font-size: 0.74rem;
}

.insert-dumbbell-wrap {
    display: flex;
    flex-direction: column;
    gap: 0.55rem;
}

.insert-side-selectors {
    display: flex;
    gap: 0.45rem;
}

.insert-side-btn {
    border: 1px solid rgba(148, 163, 184, 0.42);
    border-radius: 6px;
    background: rgba(30, 41, 59, 0.78);
    color: #cbd5e1;
    font-size: 0.74rem;
    padding: 0.32rem 0.56rem;
    cursor: pointer;
}

.insert-side-btn.active {
    border-color: rgba(99, 102, 241, 0.95);
    color: #e0e7ff;
}

.relation-visual-insert {
    display: grid;
    grid-template-columns: minmax(0, 1fr) auto minmax(0, 1fr) auto minmax(0, 1fr);
    align-items: center;
    gap: 0.45rem;
}

.relation-visual-insert.compact .relation-node {
    font-size: 0.72rem;
}

.insert-segment-btn {
    border: 1px solid rgba(129, 140, 248, 0.58);
    border-radius: 999px;
    padding: 0.18rem 0.56rem;
    background: rgba(30, 41, 59, 0.75);
    color: #dbeafe;
    font-size: 0.72rem;
    white-space: nowrap;
    cursor: pointer;
    transition: border-color 0.2s ease, background 0.2s ease, opacity 0.2s ease;
}

.insert-segment-btn:hover {
    border-color: rgba(129, 140, 248, 0.92);
    background: rgba(79, 70, 229, 0.28);
}

.insert-segment-btn.locked {
    cursor: not-allowed;
    opacity: 0.8;
    border-color: rgba(148, 163, 184, 0.45);
}

.insert-segment-static {
    color: #bfdbfe;
    font-size: 0.72rem;
    white-space: nowrap;
}

.insert-direction-state {
    color: #93c5fd;
    font-size: 0.74rem;
}

.insert-direction-state.locked {
    color: #fcd34d;
}

.search-input-group {
    display: flex;
    gap: 0.5rem;
}

.search-input-group .form-input {
    flex: 1;
}

.relation-inner-scroll {
    max-height: 180px;
    overflow-y: auto;
    border-radius: 8px;
}

.search-results {
    border: 1px solid rgba(99, 102, 241, 0.24);
    background: rgba(15, 23, 42, 0.62);
    display: flex;
    flex-direction: column;
    gap: 0.38rem;
    padding: 0.45rem;
}

.search-result-item {
    border: 1px solid rgba(148, 163, 184, 0.2);
    border-radius: 7px;
    background: rgba(30, 41, 59, 0.7);
    color: inherit;
    width: 100%;
    text-align: left;
    padding: 0.58rem 0.65rem;
}

.search-result-item.selectable {
    cursor: pointer;
}

.search-result-item.selectable:hover {
    border-color: rgba(129, 140, 248, 0.55);
}

.search-result-item.selected {
    border-color: rgba(129, 140, 248, 0.9);
    background: rgba(79, 70, 229, 0.22);
}

.create-node-modal .admin-assoc-candidate-list {
    display: flex;
    flex-direction: column;
    gap: 0.45rem;
    max-height: 220px;
    overflow-y: auto;
}

.create-node-modal .admin-assoc-candidate-item {
    border: 1px solid rgba(99, 102, 241, 0.2);
    border-radius: 8px;
    background: rgba(15, 23, 42, 0.45);
    padding: 0.62rem 0.72rem;
}

.create-node-modal .admin-assoc-candidate-item:hover {
    border-color: rgba(96, 165, 250, 0.65);
}

.create-node-modal .admin-assoc-candidate-item.selected {
    border-color: rgba(96, 165, 250, 0.85);
    background: rgba(30, 64, 175, 0.3);
}

.create-node-modal .admin-assoc-search-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.7rem;
}

.create-node-modal .admin-assoc-search-main {
    display: flex;
    flex-direction: column;
    gap: 0.2rem;
}

.create-node-modal .admin-assoc-search-hint {
    color: #94a3b8;
    font-size: 0.75rem;
}

.search-result-item .node-info {
    display: flex;
    flex-direction: column;
    gap: 0.2rem;
}

.node-title-row {
    display: flex;
    align-items: center;
    gap: 0.4rem;
}

.search-result-item strong {
    color: #e2e8f0;
    font-size: 0.82rem;
}

.relation-prefix {
    font-size: 0.66rem;
    line-height: 1;
    border-radius: 999px;
    padding: 0.14rem 0.36rem;
    border: 1px solid rgba(148, 163, 184, 0.38);
    color: #cbd5e1;
    background: rgba(30, 41, 59, 0.72);
}

.relation-prefix.relation-上级 {
    border-color: rgba(34, 197, 94, 0.52);
    color: #bbf7d0;
}

.relation-prefix.relation-下级 {
    border-color: rgba(59, 130, 246, 0.5);
    color: #bfdbfe;
    background: rgba(30, 64, 175, 0.36);
}

.relation-prefix.relation-无关 {
    border-color: rgba(148, 163, 184, 0.4);
    color: #cbd5e1;
}

.relation-prefix.relation-none {
    border-color: rgba(148, 163, 184, 0.4);
    color: #cbd5e1;
}

.search-result-item .node-description {
    color: #94a3b8;
    font-size: 0.74rem;
    line-height: 1.3;
}

.add-relation-btn {
    width: fit-content;
}

.create-node-modal .admin-add-sense-add-relation-btn {
    margin-top: 0.1rem;
}

.target-selector-overlay {
    position: absolute;
    inset: 0;
    background: rgba(2, 6, 23, 0.62);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 20;
    border-radius: 14px;
}

.target-selector-panel {
    width: min(560px, calc(100% - 1.5rem));
    max-height: calc(100% - 2rem);
    display: flex;
    flex-direction: column;
    border-radius: 12px;
    border: 1px solid rgba(129, 140, 248, 0.5);
    background: linear-gradient(140deg, rgba(15, 23, 42, 0.97) 0%, rgba(30, 41, 59, 0.97) 100%);
    box-shadow: 0 14px 34px rgba(2, 6, 23, 0.6);
}

.relation-help-panel {
    width: min(640px, calc(100% - 1.5rem));
}

.target-selector-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.75rem;
    padding: 0.72rem 0.9rem;
    border-bottom: 1px solid rgba(129, 140, 248, 0.3);
}

.target-selector-header strong {
    color: #e2e8f0;
    font-size: 0.9rem;
}

.target-selector-search-row {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.7rem 0.9rem;
}

.target-selector-search-icon {
    color: #93c5fd;
    flex-shrink: 0;
}

.target-selector-search-row .form-input {
    flex: 1;
}

.target-selector-command-hint {
    color: #94a3b8;
    font-size: 0.75rem;
    padding: 0 0.9rem 0.2rem;
}

.target-selector-command-hint code {
    color: #dbeafe;
    background: rgba(30, 41, 59, 0.8);
    border: 1px solid rgba(148, 163, 184, 0.35);
    border-radius: 4px;
    padding: 0 0.22rem;
}

.target-selector-results {
    margin: 0 0.9rem;
    border: 1px solid rgba(129, 140, 248, 0.24);
    background: rgba(15, 23, 42, 0.65);
    padding: 0.48rem;
    display: flex;
    flex-direction: column;
    gap: 0.42rem;
}

.target-selector-empty {
    color: #94a3b8;
    font-size: 0.8rem;
    text-align: center;
    padding: 0.8rem 0.4rem;
}

.relation-help-content {
    margin: 0.65rem 0.9rem 0;
    border: 1px solid rgba(129, 140, 248, 0.25);
    background: rgba(2, 6, 23, 0.4);
    padding: 0.7rem 0.85rem;
    color: #cbd5e1;
    font-size: 0.82rem;
    line-height: 1.55;
    display: flex;
    flex-direction: column;
    gap: 0.45rem;
}

.relation-help-content p {
    margin: 0;
}

.relation-help-content strong {
    color: #e2e8f0;
}

.target-selector-footer {
    display: flex;
    justify-content: flex-end;
    gap: 0.6rem;
    padding: 0.75rem 0.9rem;
    border-top: 1px solid rgba(129, 140, 248, 0.24);
    margin-top: 0.7rem;
}

.relation-inner-scroll::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

.relation-inner-scroll::-webkit-scrollbar-track {
    background: rgba(15, 23, 42, 0.56) !important;
}

.relation-inner-scroll::-webkit-scrollbar-thumb {
    background: rgba(99, 102, 241, 0.52) !important;
}

.relation-inner-scroll::-webkit-scrollbar-thumb:hover {
    background: rgba(129, 140, 248, 0.8) !important;
}

.sense-relations-list {
    border: 1px solid rgba(99, 102, 241, 0.2);
    background: rgba(2, 6, 23, 0.38);
    padding: 0.5rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.relation-card {
    border: 1px solid rgba(148, 163, 184, 0.26);
    border-radius: 8px;
    background: rgba(30, 41, 59, 0.62);
    padding: 0.56rem;
    display: flex;
    flex-direction: column;
    gap: 0.42rem;
}

.create-node-modal .admin-add-sense-added-relations {
    margin-top: 0.15rem;
    max-height: 220px;
}

.create-node-modal .admin-add-sense-relation-item {
    border-color: rgba(100, 116, 139, 0.38);
}

.create-node-modal .admin-add-sense-empty-relations {
    margin: 0;
    color: #94a3b8;
}

.relation-card-top {
    display: flex;
    align-items: center;
}

.relation-type-pill {
    margin-right: auto;
    font-size: 0.72rem;
    color: #dbeafe;
    border: 1px solid rgba(129, 140, 248, 0.52);
    border-radius: 999px;
    padding: 0.18rem 0.45rem;
}

.empty-relation-hint {
    color: #94a3b8;
    font-size: 0.78rem;
    text-align: center;
    padding: 0.65rem 0.4rem;
}

.icon-small {
    width: 16px;
    height: 16px;
}

@media (max-width: 760px) {
    .create-node-modal {
        width: 98vw;
    }

    .create-node-modal .modal-body {
        padding: 0.85rem;
    }

    .relation-visual-insert {
        grid-template-columns: minmax(0, 1fr);
        justify-items: stretch;
    }
}
